<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#0F2F5F"/>
  <title>Détections — Fly Future Champions</title>
  <meta name="description" content="Inscription aux détections Fly Future Champions. Calendrier dynamique, formulaire et médias."/>
  <style>
    :root{
      --blue-950:#071B3A;
      --blue-900:#0B244D;
      --blue-800:#0F2F5F;
      --blue-700:#13406F;
      --blue-600:#14508F;
      --blue-500:#1D6CE2;
      --ink:#081628;
      --muted:#5D6B7E;
      --line:rgba(20,80,143,.18);
      --glass:rgba(255,255,255,.66);
      --glass-strong:rgba(255,255,255,.82);
      --shadow:0 16px 45px rgba(5,18,42,.14);
      --shadow2:0 10px 28px rgba(5,18,42,.12);
      --radius:22px;
      --radius2:16px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 12% 15%, rgba(29,108,226,.12), transparent 62%),
        radial-gradient(900px 600px at 82% 30%, rgba(20,80,143,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #f6f9ff 55%, #ffffff 100%);
      overflow-x:hidden;
    }

    /* Court background layer */
    .court-bg{
      position:fixed;
      inset:-10% -10% -10% -10%;
      pointer-events:none;
      z-index:-2;
      background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%201000%20500%27%3E%0A%20%20%3Cdefs%3E%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20.l%7Bfill%3Anone%3Bstroke%3A%2314508F%3Bstroke-width%3A4%3Bstroke-opacity%3A.22%3Bvector-effect%3Anon-scaling-stroke%3B%7D%0A%20%20%20%20%20%20.d%7Bfill%3Anone%3Bstroke%3A%2314508F%3Bstroke-width%3A3%3Bstroke-opacity%3A.14%3Bstroke-dasharray%3A10%2010%3Bvector-effect%3Anon-scaling-stroke%3B%7D%0A%20%20%20%20%3C/style%3E%0A%20%20%3C/defs%3E%0A%0A%20%20%3C%21--%20Outer%20boundaries%20--%3E%0A%20%20%3Crect%20class%3D%27l%27%20x%3D%2720%27%20y%3D%2720%27%20width%3D%27960%27%20height%3D%27460%27%20rx%3D%2718%27/%3E%0A%0A%20%20%3C%21--%20Center%20line%20%26%20circle%20--%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27500%27%20y1%3D%2720%27%20x2%3D%27500%27%20y2%3D%27480%27/%3E%0A%20%20%3Ccircle%20class%3D%27l%27%20cx%3D%27500%27%20cy%3D%27250%27%20r%3D%2760%27/%3E%0A%20%20%3Ccircle%20class%3D%27d%27%20cx%3D%27500%27%20cy%3D%27250%27%20r%3D%2710%27/%3E%0A%0A%20%20%3C%21--%20Keys%20--%3E%0A%20%20%3Crect%20class%3D%27l%27%20x%3D%2720%27%20y%3D%27170%27%20width%3D%27190%27%20height%3D%27160%27/%3E%0A%20%20%3Crect%20class%3D%27l%27%20x%3D%27790%27%20y%3D%27170%27%20width%3D%27190%27%20height%3D%27160%27/%3E%0A%0A%20%20%3C%21--%20Free-throw%20circles%20%28dashed%29%20--%3E%0A%20%20%3Ccircle%20class%3D%27d%27%20cx%3D%27210%27%20cy%3D%27250%27%20r%3D%2760%27/%3E%0A%20%20%3Ccircle%20class%3D%27d%27%20cx%3D%27790%27%20cy%3D%27250%27%20r%3D%2760%27/%3E%0A%0A%20%20%3C%21--%20Baskets%20--%3E%0A%20%20%3Ccircle%20class%3D%27l%27%20cx%3D%2790%27%20cy%3D%27250%27%20r%3D%278%27/%3E%0A%20%20%3Ccircle%20class%3D%27l%27%20cx%3D%27910%27%20cy%3D%27250%27%20r%3D%278%27/%3E%0A%0A%20%20%3C%21--%20Backboards%20--%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27115%27%20y1%3D%27220%27%20x2%3D%27115%27%20y2%3D%27280%27/%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27885%27%20y1%3D%27220%27%20x2%3D%27885%27%20y2%3D%27280%27/%3E%0A%0A%20%20%3C%21--%20Restricted%20area%20arcs%20--%3E%0A%20%20%3Cpath%20class%3D%27l%27%20d%3D%27M130%20210%20A40%2040%200%200%201%20130%20290%27/%3E%0A%20%20%3Cpath%20class%3D%27l%27%20d%3D%27M870%20210%20A40%2040%200%200%200%20870%20290%27/%3E%0A%0A%20%20%3C%21--%20Corner%203pt%20lines%20--%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27140%27%20y1%3D%2720%27%20x2%3D%27140%27%20y2%3D%27130%27/%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27140%27%20y1%3D%27370%27%20x2%3D%27140%27%20y2%3D%27480%27/%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27860%27%20y1%3D%2720%27%20x2%3D%27860%27%20y2%3D%27130%27/%3E%0A%20%20%3Cline%20class%3D%27l%27%20x1%3D%27860%27%20y1%3D%27370%27%20x2%3D%27860%27%20y2%3D%27480%27/%3E%0A%0A%20%20%3C%21--%203pt%20arcs%20--%3E%0A%20%20%3Cpath%20class%3D%27l%27%20d%3D%27M178%2032%20A235%20235%200%200%201%20178%20468%27/%3E%0A%20%20%3Cpath%20class%3D%27l%27%20d%3D%27M822%2032%20A235%20235%200%200%200%20822%20468%27/%3E%0A%3C/svg%3E");
      background-repeat:repeat;
      background-size: 980px 490px;
      opacity:.85;
      transform: translate3d(0,0,0);
      filter: saturate(1.08) contrast(1.02);
      mask-image: radial-gradient(closest-side at 50% 45%, rgba(0,0,0,.88), rgba(0,0,0,.12));
    }

    /* soft fading / appearing like your previous effect */
    .court-bg::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(700px 500px at 20% 20%, rgba(255,255,255,.85), transparent 62%),
        radial-gradient(900px 650px at 80% 35%, rgba(255,255,255,.82), transparent 60%),
        radial-gradient(900px 650px at 50% 80%, rgba(255,255,255,.72), transparent 60%);
      animation: courtBreath 7.5s ease-in-out infinite;
      opacity:.8;
    }

    @keyframes courtBreath{
      0%,100%{opacity:.74; filter: blur(0px)}
      50%{opacity:.95; filter: blur(.25px)}
    }

    /* Top navigation */
    .nav{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(16px);
      background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.68));
      border-bottom:1px solid rgba(9,35,77,.06);
    }
    .nav-inner{
      max-width:1200px;
      margin:0 auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      gap:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 260px;
    }
    .brand-logo{width:48px;height:48px;display:grid;place-items:center;background:transparent;border:none;box-shadow:none;}
    .brand-logo img{width:48px;height:48px;object-fit:contain;display:block;}

    .brand-text{line-height:1.05}
    .brand-title{font-weight:860; letter-spacing:.6px; font-size:14px; color:var(--blue-900)}
    .brand-sub{font-size:12px; color:var(--muted)}

    .nav-links{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:18px;
    }
    .nav-links a{
      text-decoration:none;
      color:rgba(8,22,40,.72);
      font-weight:650;
      font-size:14px;
      padding:10px 10px;
      border-radius:12px;
      transition: transform .2s ease, background .2s ease, color .2s ease;
      outline:none;
    }
    .nav-links a:hover{background: rgba(20,80,143,.08); color: var(--blue-900)}
    .nav-links a.active{
      background: rgba(20,80,143,.12);
      color: var(--blue-900);
    }

    .nav-right{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .pill{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.9);
      border:1px solid rgba(9,35,77,.10);
      box-shadow: 0 10px 24px rgba(7,27,58,.10);
      color: var(--blue-900);
      font-weight:800;
      font-size:13px;
      white-space:nowrap;
    }

    .btn{
      border:0;
      cursor:pointer;
      font-weight:850;
      letter-spacing:.2px;
      border-radius:999px;
      padding:12px 16px;
      background: linear-gradient(135deg, var(--blue-700), var(--blue-600));
      color:white;
      box-shadow: 0 14px 32px rgba(20,80,143,.26);
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: 0 18px 40px rgba(20,80,143,.28); filter:saturate(1.04)}
    .btn:active{transform: translateY(0px); box-shadow: 0 12px 28px rgba(20,80,143,.22)}

    .icon-btn{
      width:40px;height:40px;border-radius:999px;
      border:1px solid rgba(9,35,77,.10);
      background: rgba(255,255,255,.85);
      display:grid;place-items:center;
      cursor:pointer;
      transition: transform .18s ease, background .18s ease;
    }
.icon-btn--ball{background:rgba(255,255,255,.92);border-color:rgba(120,170,255,.65);color:var(--blue);} 
.icon-btn--ball svg{fill:none;stroke:currentColor;}

    .icon-btn:hover{transform: translateY(-1px); background: rgba(20,80,143,.08)}
    .icon{width:18px;height:18px; fill: var(--blue-900)}

    /* Layout */
    .wrap{max-width:1200px; margin:0 auto; padding:28px 18px 70px}

    .hero{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:24px;
      align-items:stretch;
      padding-top:12px;
    }

    .card{
      background: var(--glass);
      border: 1px solid rgba(9,35,77,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
    }

    .hero-left{padding:28px 26px; overflow:hidden; position:relative}

    .eyebrow{
      display:flex; align-items:center; gap:10px;
      font-weight:850;
      letter-spacing:.16em;
      font-size:12px;
      color: rgba(8,22,40,.62);
      text-transform:uppercase;
    }
    .dot{width:8px;height:8px;border-radius:999px; background: var(--blue-600); box-shadow:0 0 0 7px rgba(20,80,143,.10)}

    h1{
      margin:14px 0 10px;
      font-size: clamp(42px, 5.4vw, 70px);
      line-height: .95;
      letter-spacing: -0.03em;
      color: var(--blue-900);
    }

    .lead{margin:0 0 18px; font-size:16px; color: rgba(8,22,40,.68); max-width:56ch}

    .hero-actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px}
    .ghost{
      background: rgba(255,255,255,.78);
      border:1px solid rgba(20,80,143,.16);
      color: var(--blue-900);
      box-shadow: 0 10px 24px rgba(7,27,58,.08);
    }

    .chips{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .chip{
      font-size:13px;
      font-weight:760;
      color: rgba(8,22,40,.72);
      padding:9px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.72);
      border:1px solid rgba(9,35,77,.10);
    }

    .hero-right{padding:22px; display:flex; flex-direction:column; gap:14px}

    .next{
      padding:16px 16px;
      background: rgba(255,255,255,.84);
      border:1px solid rgba(9,35,77,.10);
      border-radius: var(--radius2);
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
    }

    .next::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(450px 250px at 20% 20%, rgba(29,108,226,.22), transparent 55%),
                  radial-gradient(380px 220px at 80% 30%, rgba(20,80,143,.18), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }

    .next > *{position:relative}

    .next-title{font-weight:900; font-size:14px; color: rgba(8,22,40,.72); letter-spacing:.12em; text-transform:uppercase}
    .next-date{margin-top:8px; font-weight:950; font-size:26px; color: var(--blue-900); letter-spacing:-.02em}
    .next-meta{margin-top:6px; display:flex; flex-wrap:wrap; gap:10px; color: rgba(8,22,40,.66); font-weight:700; font-size:13px}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.70);
      border:1px solid rgba(20,80,143,.14);
    }
    .badge svg{width:16px;height:16px; fill: var(--blue-600)}

    .mini{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }

    .mini-card{padding:14px; border-radius: var(--radius2); background: rgba(255,255,255,.78); border:1px solid rgba(9,35,77,.10); box-shadow: var(--shadow2)}
    .mini-k{font-size:12px; letter-spacing:.14em; font-weight:900; text-transform:uppercase; color: rgba(8,22,40,.58)}
    .mini-v{margin-top:8px; font-size:16px; font-weight:900; color: var(--blue-900)}
    .mini-s{margin-top:4px; color: rgba(8,22,40,.65); font-size:13px; font-weight:650;}

    /* Sections */
    .section{margin-top:26px}
    .section-head{display:flex; align-items:flex-end; justify-content:space-between; gap:14px; margin-bottom:14px}
    .section h2{margin:0; font-size:30px; letter-spacing:-.02em; color: var(--blue-900)}
    .section p{margin:6px 0 0; color: rgba(8,22,40,.66); font-weight:650}

    .grid2{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:18px;
      align-items:start;
    }

    /* Calendar */
    .calendar{padding:18px;}
    .cal-top{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px}
    .cal-title{font-weight:950; letter-spacing:-.02em; color: var(--blue-900); font-size:18px}
    .cal-controls{display:flex; align-items:center; gap:10px}

    .cal-btn{
      width:40px;height:40px;
      border-radius:14px;
      border:1px solid rgba(9,35,77,.10);
      background: rgba(255,255,255,.78);
      cursor:pointer;
      display:grid; place-items:center;
      transition: transform .18s ease, background .18s ease;
    }
    .cal-btn:hover{transform: translateY(-1px); background: rgba(20,80,143,.08)}
    .cal-btn svg{width:18px;height:18px; fill: var(--blue-900)}

    .cal-grid{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap:10px;
      padding-top:10px;
    }

    .dow{
      text-align:center;
      font-size:12px;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: rgba(8,22,40,.52);
      padding:10px 0;
    }

    .day{
      position:relative;
      min-height: 84px;
      border-radius: 16px;
      border:1px solid rgba(9,35,77,.10);
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 20px rgba(7,27,58,.06);
      padding:10px;
      cursor:pointer;
      overflow:hidden;
      transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
    }
    .day:hover{transform: translateY(-2px); background: rgba(255,255,255,.86); box-shadow: 0 16px 28px rgba(7,27,58,.10)}
    .day.muted{opacity:.42; cursor:default}
    .day.muted:hover{transform:none; box-shadow: 0 10px 20px rgba(7,27,58,.06)}

    .dnum{font-weight:950; color: rgba(8,22,40,.82); font-size:14px}
    .event-dot{
      position:absolute;
      left:10px; bottom:10px;
      display:flex; gap:6px;
    }
    .dot2{width:8px;height:8px;border-radius:999px; background: var(--blue-600); box-shadow:0 0 0 8px rgba(20,80,143,.10)}

    .event-mini{
      margin-top:6px;
      font-size:12px;
      font-weight:850;
      color: rgba(8,22,40,.74);
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .day.today{outline:3px solid rgba(29,108,226,.22)}
    .day.has-event{background: rgba(29,108,226,.08)}

    /* Right panel */
    .panel{padding:18px}

    .panel .hint{
      font-size:12px;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: rgba(8,22,40,.55);
      margin:0 0 10px;
    }

    .event-list{display:flex; flex-direction:column; gap:10px}

    .event-item{
      padding:14px;
      border-radius: 18px;
      background: rgba(255,255,255,.78);
      border:1px solid rgba(9,35,77,.10);
      box-shadow: 0 10px 22px rgba(7,27,58,.08);
      cursor:pointer;
      transition: transform .18s ease, background .18s ease;
    }
    .event-item:hover{transform: translateY(-1px); background: rgba(255,255,255,.88)}

    .event-top{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .event-name{font-weight:950; color: var(--blue-900); letter-spacing:-.01em}
    .event-date{font-weight:900; color: rgba(8,22,40,.70); font-size:13px}
    .event-sub{margin-top:6px; color: rgba(8,22,40,.65); font-weight:650; font-size:13px}

    /* Form */
    .form{padding:18px; overflow:hidden; position:relative}

    .form-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }

    label{display:block; font-size:12px; font-weight:900; letter-spacing:.12em; text-transform:uppercase; color: rgba(8,22,40,.56); margin:0 0 8px}

    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(9,35,77,.12);
      background: rgba(255,255,255,.82);
      font: inherit;
      color: rgba(8,22,40,.86);
      outline:none;
      transition: box-shadow .18s ease, border .18s ease;
    }
    input:focus, select:focus, textarea:focus{border-color: rgba(29,108,226,.35); box-shadow: 0 0 0 5px rgba(29,108,226,.10)}

    textarea{min-height:110px; resize: vertical}

    .span2{grid-column: 1 / -1}

    .form-actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; align-items:center}

    .checkbox{
      display:flex; align-items:flex-start; gap:10px;
      margin-top:12px;
      padding:12px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.68);
      border:1px solid rgba(9,35,77,.10);
    }
    .checkbox input{width:18px; height:18px; margin-top:2px}
    .checkbox p{margin:0; font-size:13px; color: rgba(8,22,40,.66); font-weight:650;}
    .checkbox a{color: var(--blue-700); font-weight:850; text-decoration:none}

    /* Media */
    .media{padding:18px}

    .tabs{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px}
    .tab{
      border:1px solid rgba(9,35,77,.10);
      background: rgba(255,255,255,.78);
      padding:10px 12px;
      border-radius: 999px;
      font-weight:900;
      cursor:pointer;
      color: rgba(8,22,40,.72);
      transition: transform .18s ease, background .18s ease;
    }
    .tab:hover{transform: translateY(-1px); background: rgba(20,80,143,.08)}
    .tab.active{background: rgba(29,108,226,.12); color: var(--blue-900)}

    .masonry{
      columns: 3;
      column-gap: 12px;
    }
    .mitem{break-inside:avoid; margin:0 0 12px; border-radius: 18px; overflow:hidden; position:relative; box-shadow: 0 18px 40px rgba(7,27,58,.12); border:1px solid rgba(9,35,77,.10); background:#fff}
    .mitem img{width:100%; height:auto; display:block; transform: scale(1.02); transition: transform .6s ease}
    .mitem:hover img{transform: scale(1.06)}

    .mitem::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(340px 220px at 30% 20%, rgba(255,255,255,.10), transparent 55%),
                  linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.08));
      opacity:.8;
      pointer-events:none;
    }

    .video-wrap{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      align-items:stretch;
    }

    .video-card{
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(9,35,77,.10);
      background: rgba(255,255,255,.8);
      box-shadow: var(--shadow);
      position:relative;
    }
    video{width:100%; height:100%; display:block; object-fit:cover; background:#000}

    .video-meta{padding:16px}
    .video-meta h3{margin:0; color: var(--blue-900); letter-spacing:-.01em}
    .video-meta p{margin:6px 0 0; color: rgba(8,22,40,.66); font-weight:650}

    /* Lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      z-index:90;
      background: rgba(5,18,42,.64);
      backdrop-filter: blur(10px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .lightbox.open{display:flex}
    .lightbox-inner{
      max-width:min(1000px, 96vw);
      max-height: 92vh;
      border-radius: 22px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 26px 70px rgba(0,0,0,.45);
      position:relative;
    }
    .lightbox-inner img{width:100%; height:auto; display:block}
    .lb-close{
      position:absolute;
      top:10px; right:10px;
      width:44px; height:44px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.14);
      color:#fff;
      cursor:pointer;
      display:grid; place-items:center;
      backdrop-filter: blur(10px);
    }
    .lb-close svg{width:18px;height:18px; fill:#fff}

    /* Toast */
    .toast{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:100;
      min-width: 280px;
      max-width: min(420px, 92vw);
      background: rgba(255,255,255,.90);
      border:1px solid rgba(9,35,77,.12);
      border-radius: 18px;
      box-shadow: 0 22px 60px rgba(7,27,58,.22);
      padding:14px;
      display:none;
      backdrop-filter: blur(14px);
    }
    .toast.show{display:block; animation: toastIn .22s ease-out}
    @keyframes toastIn{from{transform: translateY(12px); opacity:0} to{transform: translateY(0); opacity:1}}
    .toast-title{font-weight:950; color: var(--blue-900)}
    .toast-msg{margin-top:4px; color: rgba(8,22,40,.66); font-weight:650; font-size:13px}
    .toast-actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}

    /* Reveal animations */
    .reveal{opacity:0; transform: translateY(14px); transition: opacity .6s ease, transform .6s ease}
    .reveal.on{opacity:1; transform: translateY(0)}

    /* Footer */
    footer{margin-top:26px; padding:18px; border-radius: var(--radius); border:1px solid rgba(9,35,77,.10); background: rgba(255,255,255,.72); box-shadow: var(--shadow2)}
    .foot{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .foot small{color: rgba(8,22,40,.62); font-weight:650}

    /* Responsive */
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr}
      .grid2{grid-template-columns: 1fr}
      .video-wrap{grid-template-columns:1fr}
      .brand{min-width:unset}
      .nav-links{display:none}
      .masonry{columns:2}
    }
    @media (max-width: 560px){
      .masonry{columns:1}
      .form-grid{grid-template-columns:1fr}
      .mini{grid-template-columns: 1fr}
      .pill{display:none}
    }
    .mobileMenu{
  position:fixed;
  inset:0;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
  z-index: 9999;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding: 18px;
}
.mobileMenu.hidden{ display:none; }

.mobileMenuCard{
  width:min(520px, 92vw);
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(11,47,85,.14);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 24px 60px rgba(8,30,56,.18);
}

.mobileMenuTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom: 10px;
  color: #0B2F55;
}

.mobileMenuCard a{
  display:block;
  padding: 12px 12px;
  border-radius: 12px;
  text-decoration:none;
  color: rgba(11,19,32,.86);
  font-weight: 700;
}
.mobileMenuCard a:hover{
  background: rgba(11,47,85,.06);
}

/* Sur PC on cache le bouton menu */
@media (min-width: 921px){
  #menuBtn{ display:none; }
}

  </style>
</head>
<body>
  <div class="court-bg" aria-hidden="true"></div>

  <header class="nav">
    <div class="nav-inner">
      <div class="brand">
        <div class="brand-logo">
          <img alt="Fly Future Champions" src="assets/logo_header.png" />
        </div>
        <div class="brand-text">
          <div class="brand-title">FLY FUTURE CHAMPIONS</div>
          <div class="brand-sub">Basketball • Jeunes • Haut niveau</div>
        </div>
      </div>

      <nav class="nav-links" aria-label="Navigation">
        <a href="index.html">Accueil</a>
        <a class="active" href="detections.html">Détections</a>
        <a href="programmes.html">Programmes</a>
        <a href="contact.html">Contact</a>
      </nav>

      <div class="nav-right">
        <div class="pill" id="nextPill">Prochaine détection • 22 février</div>
        <a class="icon-btn" href="https://www.tiktok.com/@leflyassociation?_r=1&_t=ZN-93D6r6lFyTL" target="_blank" rel="noopener" aria-label="TikTok">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.6 3c.3 2.7 2.2 4.8 4.9 5.1v3.2c-1.7.1-3.3-.4-4.9-1.3v6.6c0 4.1-3.3 7.4-7.4 7.4S1.8 20.7 1.8 16.6 5.1 9.2 9.2 9.2c.4 0 .8 0 1.2.1v3.4c-.4-.1-.8-.2-1.2-.2-2.2 0-4.1 1.8-4.1 4.1s1.8 4.1 4.1 4.1 4.1-1.8 4.1-4.1V3h3.3z"/></svg>
        </a>
        <a class="icon-btn icon-btn--ball" href="https://www.leflyasso.com/" target="_blank" rel="noopener" aria-label="Aller sur leflyasso.com"><svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.8"/>
  <path d="M3 12h18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
  <path d="M12 3v18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
  <path d="M6 6c3 3 3 9 0 12" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
  <path d="M18 6c-3 3-3 9 0 12" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
</svg></a>
        <a class="icon-btn" href="https://www.instagram.com/fly_future_champions?igsh=MTA0NXJhbzdvY3Vy" target="_blank" rel="noopener" aria-label="Instagram">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 3.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 0 1 12 7.5zm0 2A2.5 2.5 0 1 0 14.5 12 2.5 2.5 0 0 0 12 9.5zM17.8 6.2a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/></svg>
        </a>
        <button class="btn" id="scrollToForm">S'inscrire</button>
        <button class="iconbtn" id="menuBtn" aria-label="Ouvrir le menu">☰</button>

      </div>
    </div>
  </header>

    <div class="mobileMenu hidden" id="mobileMenu" role="dialog" aria-modal="true">
  <div class="mobileMenuCard">
    <div class="mobileMenuTop">
      <strong>Menu</strong>
      <button class="iconbtn" id="menuClose" aria-label="Fermer">✕</button>
    </div>

    <a href="index.html">Accueil</a>
    <a href="detections.html">Détections</a>
    <a href="programmes.html">Programmes</a>
    <a href="contact.html">Contact</a>
  </div>
</div>


  <main class="wrap">
    <section class="hero">
      <div class="card hero-left reveal">
        <div class="eyebrow"><span class="dot"></span> Détections • calendrier & inscriptions</div>
        <h1>Viens tester<br/>ton niveau.</h1>
        <p class="lead">
          Les détections Fly Future Champions sont conçues pour révéler ton potentiel : évaluation, intensité, feedback et orientation.
          Sélectionne une date dans le calendrier, puis complète le formulaire.
        </p>

        <div class="chips">
          <span class="chip">Coach reconnus</span>
          <span class="chip">Prépa mental</span>
          <span class="chip">Suivi & orientation</span>
          <span class="chip">Garçons & Filles</span>
        </div>

        <div class="hero-actions">
          <button class="btn" id="scrollToCalendar">Voir le calendrier</button>
          <button class="btn ghost" id="scrollToMedia">Médias</button>
        </div>
      </div>

      <aside class="card hero-right reveal">
        <div class="next" id="nextCard">
          <div class="next-title">Prochaine détection</div>
          <div class="next-date" id="nextDate">22 février 2026</div>
          <div class="next-meta">
            <span class="badge"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5.2-7 13-7 13S5 14.2 5 9a7 7 0 0 1 7-7zm0 9.5A2.5 2.5 0 1 0 9.5 9 2.5 2.5 0 0 0 12 11.5z"/></svg><span id="nextCity">Levallois (92)</span></span>
            <span class="badge"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10v2h2v18H5V4h2V2zm0 4v14h10V6H7zm2 2h6v2H9V8zm0 4h6v2H9v-2z"/></svg><span id="nextSlots">Places limitées</span></span>
          </div>
        </div>

        <div class="mini">
          <div class="mini-card">
            <div class="mini-k">Format</div>
            <div class="mini-v">Évaluation + feedback</div>
            <div class="mini-s">Tests, jeu, échanges, orientation</div>
          </div>
          <div class="mini-card">
            <div class="mini-k">Objectif</div>
            <div class="mini-v">Accès haut niveau</div>
            <div class="mini-s">Régional • National • Centres</div>
          </div>
        </div>
      </aside>
    </section>

    <section class="section" id="calendarSection">
      <div class="section-head">
        <div>
          <h2>Calendrier des détections</h2>
          <p>Clique sur une date pour voir les détails et pré-remplir le formulaire.</p>
        </div>
      </div>

      <div class="grid2">
        <div class="card calendar reveal" aria-label="Calendrier">
          <div class="cal-top">
            <div class="cal-title" id="calTitle">—</div>
            <div class="cal-controls">
              <button class="cal-btn" id="prevMonth" aria-label="Mois précédent">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.4 7.4 10.8 12l4.6 4.6-1.4 1.4L8 12l6-6 1.4 1.4z"/></svg>
              </button>
              <button class="cal-btn" id="todayBtn" aria-label="Aujourd'hui">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10v2h2v18H5V4h2V2zm0 4v14h10V6H7zm2 2h6v2H9V8z"/></svg>
              </button>
              <button class="cal-btn" id="nextMonth" aria-label="Mois suivant">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m8.6 16.6 4.6-4.6-4.6-4.6L10 6l6 6-6 6-1.4-1.4z"/></svg>
              </button>
            </div>
          </div>

          <div class="cal-grid" id="calGrid" role="grid" aria-label="Grille calendrier"></div>
        </div>

        <aside class="card panel reveal">
          <p class="hint">Détections à venir</p>
          <div class="event-list" id="eventList"></div>
        </aside>
      </div>
    </section>

    <section class="section" id="formSection">
      <div class="section-head">
        <div>
          <h2>Inscription à une détection</h2>
          <p>Choisis la détection puis complète tes informations. (Pré-inscription — confirmation par l'équipe.)</p>
        </div>
      </div>

      <div class="card form reveal">
        <form id="signupForm" novalidate>
          <div class="form-grid">
            <div>
              <label for="eventSelect">Détection</label>
              <select id="eventSelect" required></select>
            </div>
            <div>
              <label for="level">Niveau actuel</label>
              <select id="level" required>
                <option value="">Sélectionner…</option>
                <option>Départemental</option>
                <option>Régional</option>
                <option>National</option>
                <option>Centre de formation</option>
                <option>Autre</option>
              </select>
            </div>

            <div>
              <label for="firstName">Prénom</label>
              <input id="firstName" name="first_Name" autocomplete="given-name" required placeholder="Ex : Damien"/>
            </div>
            <div>
              <label for="lastName">Nom</label>
              <input id="lastName" name="last_Name" autocomplete="family-name" required placeholder="Ex : Miyouna"/>
            </div>

            <div>
              <label for="birth">Date de naissance</label>
              <input id="birth" type="date" required/>
            </div>
            <div>
              <label for="gender">Sexe</label>
              <select id="gender" required>
                <option value="">Sélectionner…</option>
                <option>Fille</option>
                <option>Garçon</option>
              </select>
            </div>

            <div>
              <label for="position">Poste</label>
              <select id="position" required>
                <option value="">Sélectionner…</option>
                <option>1 (Meneur)</option>
                <option>2 (Arrière)</option>
                <option>3 (Ailier)</option>
                <option>4 (Ailier fort)</option>
                <option>5 (Pivot)</option>
                <option>Plusieurs</option>
              </select>
            </div>
            <div>
              <label for="height">Taille (cm)</label>
              <input id="height" inputmode="numeric" placeholder="Ex : 182"/>
            </div>

            <div>
              <label for="club">Club actuel</label>
              <input id="club" placeholder="Ex : ABC Basket"/>
            </div>
            <div>
              <label for="city">Ville</label>
              <input id="city" autocomplete="address-level2" placeholder="Ex : Paris"/>
            </div>

            <div>
              <label for="email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" required placeholder="exemple@mail.com"/>
            </div>
            <div>
              <label for="phone">Téléphone</label>
              <input id="phone" type="tel" autocomplete="tel" required placeholder="06 00 00 00 00"/>
            </div>

            <div class="span2">
              <label for="goal">Objectif</label>
              <input id="goal" placeholder="Ex : intégrer un club National / obtenir des retours / progresser"/>
            </div>

            <div class="span2">
              <label for="message">Message (optionnel)</label>
              <textarea id="message" name="notes" placeholder="Infos utiles : blessures, expériences, disponibilité, lien vidéo, etc."></textarea>
            </div>
          </div>

          <div class="checkbox">
            <input id="consent" name="consent" type="checkbox" required />
            <p>
              J'accepte que mes informations soient utilisées pour traiter ma pré-inscription (Fly Future Champions). 
              <a href="#" id="privacyLink">Voir les infos</a>.
            </p>
          </div>

          <div class="form-actions">
            <button class="btn" type="submit">Envoyer ma pré-inscription</button>
            <button class="btn ghost" type="button" id="resetBtn">Réinitialiser</button>
          </div>
        </form>
      </div>
    </section>

    <section class="section" id="mediaSection">
      <div class="section-head">
        <div>
          <h2>Photos & vidéos</h2>
          <p>Ambiance, intensité et esprit Fly Future Champions.</p>
        </div>
      </div>

      <div class="card media reveal">
        <div class="tabs" role="tablist">
          <button class="tab active" id="tabPhotos" role="tab" aria-selected="true">Photos</button>
          <button class="tab" id="tabVideos" role="tab" aria-selected="false">Vidéos</button>
        </div>

        <div id="photosPane" role="tabpanel">
          <div class="masonry" id="masonry">
            <figure class="mitem"><img alt="Fly Future Champions" data-src="assets/FutursChampions.jpeg" loading="lazy"/></figure>
            <figure class="mitem"><img alt="Affiche détection 22 février" data-src="assets/Detection_22fev_poster.jpeg" loading="lazy"/></figure>
            <figure class="mitem"><img alt="Détection" data-src="assets/IMG_7683.jpeg" loading="lazy"/></figure>
            <figure class="mitem"><img alt="Détection" data-src="assets/IMG_7684.jpeg" loading="lazy"/></figure>
            <figure class="mitem"><img alt="Détection" data-src="assets/IMG_8098.jpeg" loading="lazy"/></figure>
            <figure class="mitem"><img alt="Détection" data-src="assets/IMG_8099.jpeg" loading="lazy"/></figure>
          </div>
        </div>

        <div id="videosPane" role="tabpanel" style="display:none">
          <div class="video-wrap">
            <div class="video-card">
              <video id="promoVideo" controls playsinline preload="metadata" poster="assets/IMG_8098.jpeg">
                <source src="assets/BigDetection1.mov" type="video/quicktime" />
                Votre navigateur ne supporte pas la vidéo.
              </video>
            </div>
            <div class="video-card">
              <div class="video-meta">
                <h3>Highlights — Détection</h3>
                <p>
                  Une immersion dans l'ambiance : intensité, coaching, esprit d'équipe.
                  <br/><br/>
                  Astuce : pour une lecture optimale sur certains navigateurs, convertis la vidéo en MP4 (H.264). 
                  Je peux te générer la version MP4 si tu veux.
                </p>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <footer class="reveal">
      <div class="foot">
        <small>© <span id="year"></span> Fly Future Champions • Détections & inscriptions</small>
        <small>Réseaux : TikTok & Instagram (liens en haut)</small>
      </div>
    </footer>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox-inner" role="dialog" aria-label="Agrandissement photo">
      <button class="lb-close" id="lbClose" aria-label="Fermer">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"/></svg>
      </button>
      <img id="lbImg" alt="" />
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite">
    <div class="toast-title" id="toastTitle">—</div>
    <div class="toast-msg" id="toastMsg">—</div>
    <div class="toast-actions" id="toastActions"></div>
  </div>

  <script>
    // ---------- Data ----------
    const events = [
      {
        id: 'ffc-2026-02-22',
        title: 'Détection Fly Future Champions',
        date: '2026-02-22',
        city: 'Levallois (92)',
                venue: 'Gymnase Gabriel Péri, Levallois (92)',
age: 'Garçons & Filles',
        level: 'Orientation haut niveau',
        notes: 'Présence coachs + prépa mental + staff FFC. Places limitées.'
      }
    ];

    // ---------- Helpers ----------
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    function formatDateFR(iso){
      const d = new Date(iso + 'T00:00:00');
      return d.toLocaleDateString('fr-FR', {weekday:'long', year:'numeric', month:'long', day:'numeric'});
    }

    function formatDayMonthFR(iso){
      const d = new Date(iso + 'T00:00:00');
      return d.toLocaleDateString('fr-FR', {month:'long', day:'numeric'});
    }

    function formatShortFR(iso){
      const d = new Date(iso + 'T00:00:00');
      return d.toLocaleDateString('fr-FR', {day:'2-digit', month:'short'});
    }

    function ymd(date){
      const y = date.getFullYear();
      const m = String(date.getMonth()+1).padStart(2,'0');
      const d = String(date.getDate()).padStart(2,'0');
      return `${y}-${m}-${d}`;
    }

    // ---------- Next detection card ----------
    function getNextEvent(){
      const today = new Date();
      const sorted = [...events].sort((a,b)=>a.date.localeCompare(b.date));
      for (const ev of sorted){
        const d = new Date(ev.date + 'T00:00:00');
        if (d >= new Date(today.getFullYear(), today.getMonth(), today.getDate())) return ev;
      }
      return sorted[0];
    }

    const next = getNextEvent();
    $('#nextDate').textContent = formatDateFR(next.date).replace(/^\w/, c=>c.toUpperCase());
    $('#nextCity').textContent = next.city;
    $('#nextSlots').textContent = 'Places limitées';
    $('#nextPill').textContent = `Prochaine détection • ${formatShortFR(next.date)}`;

    // ---------- Calendar ----------
    const calGrid = $('#calGrid');
    const calTitle = $('#calTitle');

    let view = new Date(next.date + 'T00:00:00');
    view = new Date(view.getFullYear(), view.getMonth(), 1);

    const eventMap = new Map();
    events.forEach(ev => eventMap.set(ev.date, [...(eventMap.get(ev.date)||[]), ev]));

    function renderCalendar(){
      const year = view.getFullYear();
      const month = view.getMonth();

      calTitle.textContent = new Date(year, month, 1).toLocaleDateString('fr-FR', {month:'long', year:'numeric'}).replace(/^\w/, c=>c.toUpperCase());

      calGrid.innerHTML = '';

      const dows = ['Lun','Mar','Mer','Jeu','Ven','Sam','Dim'];
      dows.forEach(d => {
        const el = document.createElement('div');
        el.className = 'dow';
        el.textContent = d;
        calGrid.appendChild(el);
      });

      // Monday-based index
      const first = new Date(year, month, 1);
      let startDay = first.getDay(); // 0 Sun
      startDay = (startDay === 0) ? 7 : startDay; // 1..7
      const daysInMonth = new Date(year, month+1, 0).getDate();

      // leading blanks
      const lead = startDay - 1;
      const prevMonthDays = new Date(year, month, 0).getDate();
      for (let i=0;i<lead;i++){
        const dayNum = prevMonthDays - lead + i + 1;
        const cell = makeDayCell(new Date(year, month-1, dayNum), true);
        calGrid.appendChild(cell);
      }

      // days
      for (let d=1; d<=daysInMonth; d++){
        const cell = makeDayCell(new Date(year, month, d), false);
        calGrid.appendChild(cell);
      }

      // trailing blanks to complete weeks
      const totalCells = lead + daysInMonth;
      const trail = (7 - (totalCells % 7)) % 7;
      for (let i=1;i<=trail;i++){
        const cell = makeDayCell(new Date(year, month+1, i), true);
        calGrid.appendChild(cell);
      }

      renderEventList();
    }

    function makeDayCell(dateObj, muted){
      const cell = document.createElement('div');
      cell.className = 'day' + (muted ? ' muted' : '');
      const iso = ymd(dateObj);

      const top = document.createElement('div');
      top.className = 'dnum';
      top.textContent = dateObj.getDate();
      cell.appendChild(top);

      const todayIso = ymd(new Date());
      if (iso === todayIso) cell.classList.add('today');

      const evs = eventMap.get(iso) || [];
      if (evs.length && !muted){
        cell.classList.add('has-event');
        const mini = document.createElement('div');
        mini.className = 'event-mini';
        mini.textContent = evs[0].title;
        cell.appendChild(mini);

        const dots = document.createElement('div');
        dots.className = 'event-dot';
        for (let i=0;i<Math.min(3, evs.length); i++){
          const d = document.createElement('div');
          d.className = 'dot2';
          dots.appendChild(d);
        }
        cell.appendChild(dots);

        cell.addEventListener('click', ()=> openEvent(evs[0]));
      } else {
        cell.addEventListener('click', ()=>{
          if (muted) return;
          showToast('Aucune détection ce jour-là', 'Sélectionne une date avec un point bleu, ou choisis une détection dans la liste.', [
            {label:'Voir la liste', action: ()=> document.getElementById('eventList').scrollIntoView({behavior:'smooth', block:'start'})}
          ]);
        });
      }

      return cell;
    }

    $('#prevMonth').addEventListener('click', ()=>{ view = new Date(view.getFullYear(), view.getMonth()-1, 1); renderCalendar(); });
    $('#nextMonth').addEventListener('click', ()=>{ view = new Date(view.getFullYear(), view.getMonth()+1, 1); renderCalendar(); });
    $('#todayBtn').addEventListener('click', ()=>{
      const t = new Date();
      view = new Date(t.getFullYear(), t.getMonth(), 1);
      renderCalendar();
    });

    function renderEventList(){
      const list = $('#eventList');
      list.innerHTML = '';
      const sorted = [...events].sort((a,b)=>a.date.localeCompare(b.date));
      sorted.forEach(ev => {
        const item = document.createElement('div');
        item.className = 'event-item';
        item.tabIndex = 0;
        item.innerHTML = `
          <div class="event-top">
            <div class="event-name">${ev.title}</div>
            <div class="event-date">${formatDayMonthFR(ev.date)}</div>
          </div>
          <div class="event-sub">${(ev.venue||ev.city)} • ${ev.age} • ${ev.level}</div>
        `;
        item.addEventListener('click', ()=> openEvent(ev));
        item.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') openEvent(ev); });
        list.appendChild(item);
      });
    }

    // ---------- Form integration ----------
    function hydrateEventSelect(selectedId){
      const sel = $('#eventSelect');
      sel.innerHTML = '';
      const sorted = [...events].sort((a,b)=>a.date.localeCompare(b.date));
      const def = document.createElement('option');
      def.value = '';
      def.textContent = 'Sélectionner une détection…';
      sel.appendChild(def);

      sorted.forEach(ev => {
        const opt = document.createElement('option');
        opt.value = ev.id;
        opt.textContent = `${formatDayMonthFR(ev.date)} — ${ev.title}`;
        sel.appendChild(opt);
      });

      if (selectedId){ sel.value = selectedId; }
    }

    hydrateEventSelect(next.id);

    function openEvent(ev){
      hydrateEventSelect(ev.id);
      // also move calendar to month
      const d = new Date(ev.date + 'T00:00:00');
      view = new Date(d.getFullYear(), d.getMonth(), 1);
      renderCalendar();

      showToast(ev.title, `${formatDayMonthFR(ev.date)} • ${ev.city} • ${ev.age}. ${ev.notes}`, [
        {label: "S'inscrire", primary:true, action: ()=> document.getElementById('formSection').scrollIntoView({behavior:'smooth'})},
        {label: 'Voir médias', action: ()=> document.getElementById('mediaSection').scrollIntoView({behavior:'smooth'})}
      ]);
    }

    // submit
    $('#signupForm').addEventListener('submit', async (e)=>{
      e.preventDefault();

      const data = collectForm();
      const errors = validate(data);
      if (errors.length){
        showToast('Formulaire incomplet', errors[0], [{label:'OK', action: hideToast}]);
        return;
      }

      // Save locally (no backend)
            // --- Send to backend (Supabase via Vercel API) ---
      const payload = {
        detection_date: data.eventDate, // "2026-02-22"
        first_name: data.firstName,
        last_name: data.lastName,
        birth_year: data.birth ? parseInt(String(data.birth).slice(0,4), 10) : null, // YYYY-MM-DD -> YYYY
        gender: data.gender,
        email: data.email,
        phone: data.phone,
        city: data.city,
        level: data.level,
        position: data.position,
        height_cm: data.height ? parseInt(data.height, 10) : null,
        notes: [data.goal, data.message].filter(Boolean).join(" — "),
      };

      const resp = await fetch('/api/register-detection', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      const json = await resp.json().catch(() => ({}));
      if (!resp.ok) {
        showToast('Erreur inscription', (json.error || resp.status), [{ label:'OK', action: hideToast }]);
        return;
      }


      const summary = buildSummary(data);
      const blob = new Blob([summary], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);

      showToast('Pré-inscription envoyée ✅', 'Nous te recontactons rapidement pour confirmer et donner les infos pratiques.', [
        {label:'Télécharger mon récap', action: ()=> window.open(url, '_blank')},
        {label:'Envoyer par email', action: ()=>{
          const subject = encodeURIComponent('Pré-inscription — Fly Future Champions');
          const body = encodeURIComponent(summary);
          window.location.href = `mailto:${data.email}?subject=${subject}&body=${body}`;
        }},
        {label:'Nouvelle inscription', action: ()=>{ $('#signupForm').reset(); hydrateEventSelect(next.id); }}
      ]);
    });

    function collectForm(){
      const evId = $('#eventSelect').value;
      const ev = events.find(x=>x.id===evId);
      return {
        eventId: evId,
        eventTitle: ev?.title || '',
        eventDate: ev?.date || '',
        eventCity: ev?.city || '',
        level: $('#level').value.trim(),
        firstName: $('#firstName').value.trim(),
        lastName: $('#lastName').value.trim(),
        birth: $('#birth').value,
        gender: $('#gender').value,
        position: $('#position').value,
        height: $('#height').value.trim(),
        club: $('#club').value.trim(),
        city: $('#city').value.trim(),
        email: $('#email').value.trim(),
        phone: $('#phone').value.trim(),
        goal: $('#goal').value.trim(),
        message: $('#message').value.trim(),
        consent: $('#consent').checked
      };
    }

    function validate(d){
      const errs = [];
      if (!d.eventId) errs.push('Choisis une détection.');
      if (!d.level) errs.push('Indique ton niveau actuel.');
      if (!d.firstName) errs.push('Indique ton prénom.');
      if (!d.lastName) errs.push('Indique ton nom.');
      if (!d.birth) errs.push('Indique ta date de naissance.');
      if (!d.gender) errs.push('Indique ton sexe.');
      if (!d.position) errs.push('Indique ton poste.');
      if (!d.email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)) errs.push('Indique un email valide.');
      if (!d.phone) errs.push('Indique un téléphone.');
      if (!d.consent) errs.push('Tu dois accepter l’utilisation des infos pour l’inscription.');
      return errs;
    }

    function buildSummary(d){
      return [
        'FLY FUTURE CHAMPIONS — PRÉ-INSCRIPTION',
        '------------------------------------',
        '',
        `Détection : ${d.eventTitle}`,
        `Date : ${formatDateFR(d.eventDate)}`,
        `Ville : ${d.eventCity}`,
        '',
        `Nom : ${d.firstName} ${d.lastName}`,
        `Naissance : ${d.birth}`,
        `Sexe : ${d.gender}`,
        `Poste : ${d.position}`,
        `Taille : ${d.height} cm`,
        `Niveau : ${d.level}`,
        `Club : ${d.club}`,
        `Ville : ${d.city}`,
        '',
        `Email : ${d.email}`,
        `Téléphone : ${d.phone}`,
        '',
        `Objectif : ${d.goal}`,
        '',
        `Message : ${d.message || '-'}`,
        '',
        'Note : Ceci est une pré-inscription. Une confirmation sera envoyée par l’équipe.',
      ].join('\n');
    }

    $('#resetBtn').addEventListener('click', ()=>{
      $('#signupForm').reset();
      hydrateEventSelect(next.id);
      showToast('Réinitialisé', 'Tu peux sélectionner une autre détection et remplir le formulaire.', [{label:'OK', action: hideToast}]);
    });

    // ---------- Tabs ----------
    const photosPane = $('#photosPane');
    const videosPane = $('#videosPane');
    $('#tabPhotos').addEventListener('click', ()=>{
      $('#tabPhotos').classList.add('active');
      $('#tabVideos').classList.remove('active');
      photosPane.style.display = '';
      videosPane.style.display = 'none';
      $('#tabPhotos').setAttribute('aria-selected','true');
      $('#tabVideos').setAttribute('aria-selected','false');
    });
    $('#tabVideos').addEventListener('click', ()=>{
      $('#tabVideos').classList.add('active');
      $('#tabPhotos').classList.remove('active');
      videosPane.style.display = '';
      photosPane.style.display = 'none';
      $('#tabVideos').setAttribute('aria-selected','true');
      $('#tabPhotos').setAttribute('aria-selected','false');
    });

    // ---------- Lazy-load images + lightbox ----------
    const lb = $('#lightbox');
    const lbImg = $('#lbImg');

    function openLightbox(src, alt){
      lbImg.src = src;
      lbImg.alt = alt || '';
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
    }
    function closeLightbox(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      lbImg.src = '';
    }
    $('#lbClose').addEventListener('click', closeLightbox);
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeLightbox(); });

    const imgObserver = new IntersectionObserver((entries)=>{
      entries.forEach(en => {
        if (!en.isIntersecting) return;
        const img = en.target;
        const src = img.getAttribute('data-src');
        if (src){ img.src = src; img.removeAttribute('data-src'); }
        imgObserver.unobserve(img);
      });
    }, {rootMargin: '250px'});

    $$('#masonry img').forEach(img => {
      imgObserver.observe(img);
      img.addEventListener('click', ()=> openLightbox(img.src || img.getAttribute('data-src'), img.alt));
      img.style.cursor = 'zoom-in';
    });

    // ---------- Scroll helpers ----------
    $('#scrollToCalendar').addEventListener('click', ()=> $('#calendarSection').scrollIntoView({behavior:'smooth'}));
    $('#scrollToForm').addEventListener('click', ()=> $('#formSection').scrollIntoView({behavior:'smooth'}));
    $('#scrollToMedia').addEventListener('click', ()=> $('#mediaSection').scrollIntoView({behavior:'smooth'}));

    // ---------- Toast ----------
    let toastTimer = null;
    function showToast(title, msg, actions=[]){
      const t = $('#toast');
      $('#toastTitle').textContent = title;
      $('#toastMsg').textContent = msg;
      const act = $('#toastActions');
      act.innerHTML = '';
      actions.forEach(a => {
        const b = document.createElement('button');
        b.className = 'btn' + (a.primary ? '' : ' ghost');
        b.style.padding = '10px 14px';
        b.textContent = a.label;
        b.addEventListener('click', ()=>{ a.action?.(); });
        act.appendChild(b);
      });

      t.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> t.classList.remove('show'), 9000);
    }
    function hideToast(){ $('#toast').classList.remove('show'); }

    $('#privacyLink').addEventListener('click', (e)=>{
      e.preventDefault();
      showToast('Données & confidentialité', "Tes informations sont stockées localement dans ce navigateur (démo). Quand on branchera un vrai système d’inscription, elles seront envoyées à l’équipe Fly Future Champions uniquement.", [
        {label:'OK', action: hideToast}
      ]);
    });

    // ---------- Reveal on scroll ----------
    const revealObserver = new IntersectionObserver((entries)=>{
      entries.forEach(en => {
        if (en.isIntersecting){
          en.target.classList.add('on');
          revealObserver.unobserve(en.target);
        }
      });
    }, {threshold: 0.12});

    $$('.reveal').forEach(el => revealObserver.observe(el));

    // ---------- Subtle parallax for the court background ----------
    let lastY = 0;
    function onScroll(){
      const y = window.scrollY || 0;
      if (Math.abs(y - lastY) < 4) return;
      lastY = y;
      const tx = Math.sin(y/500) * 10;
      const ty = (y * 0.04);
      document.querySelector('.court-bg').style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
    }
    window.addEventListener('scroll', onScroll, {passive:true});

    // ---------- Init ----------
    $('#year').textContent = new Date().getFullYear();
    renderCalendar();

    // Open next event once (nice feel)
    setTimeout(()=>{
      showToast('Prochaine détection', `${next.title} — ${formatDateFR(next.date)} • ${next.city}`, [
        {label: 'Voir calendrier', primary:true, action: ()=> $('#calendarSection').scrollIntoView({behavior:'smooth'})}
      ]);
    }, 650);

  </script>
<script>
/* --- Vercel backend hookup: send registrations to /api/register-detection --- */
(function () {
  const form = document.querySelector('form#inscriptionForm') || document.querySelector('form');
  if (!form) return;

  function getSelectedDate() {
    const hidden = form.querySelector('input[name="detection_date"]') || document.getElementById('detection_date');
    if (hidden && hidden.value) return hidden.value;
    return "2026-02-22";
  }

  // Ensure hidden field exists
  let hidden = form.querySelector('input[name="detection_date"]');
  if (!hidden) {
    hidden = document.createElement('input');
    hidden.type = 'hidden';
    hidden.name = 'detection_date';
    form.appendChild(hidden);
  }
  hidden.value = getSelectedDate();

  // Helper: read by id first, fallback to name
  const val = (key) => {
    const byId = document.getElementById(key);
    if (byId && byId.value != null) return String(byId.value).trim();
    const byName = form.querySelector(`[name="${key}"]`);
    if (byName && byName.value != null) return String(byName.value).trim();
    return "";
  };

  const toInt = (x) => {
    const n = parseInt(String(x || "").trim(), 10);
    return Number.isFinite(n) ? n : null;
  };

  console.log("✅ Handler /api/register-detection attaché");

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // IMPORTANT: adapte ces IDs à ceux de ton formulaire
    const mapped = {
      detection_date: getSelectedDate(),

      // IDs attendus côté formulaire (ex: firstName/lastName)
      first_name: val("firstName") || val("prenom") || val("first_name"),
      last_name:  val("lastName")  || val("nom")    || val("last_name"),

      // Si tu as une date complète (01/03/1999), ton API attend birth_year (int)
      // => on prend l'année depuis un champ "birth_year" ou on extrait depuis "birthDate"
      birth_year: toInt(val("birth_year")) || (val("birthDate") ? toInt(val("birthDate").slice(-4)) : null),

      gender: val("gender") || val("sexe"),
      email: val("email"),
      phone: val("phone") || val("telephone") || val("tel"),
      city: val("city") || val("ville"),
      level: val("level") || val("niveau"),
      position: val("position") || val("poste"),
      height_cm: toInt(val("height_cm")) || toInt(val("taille")) || toInt(val("heightCm")),
      notes: val("notes") || val("message")
    };

    console.log("📦 Payload envoyé:", mapped);

    // Bloque le bouton pendant l’envoi
    const btn = form.querySelector('button[type="submit"]');
    if (btn) { btn.disabled = true; btn.dataset._txt = btn.textContent; btn.textContent = "Envoi…"; }

    try {
      const resp = await fetch('/api/register-detection', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(mapped)
      });

      const json = await resp.json().catch(() => ({}));
      console.log("✅ API response:", resp.status, json);

      if (!resp.ok) {
        alert("Erreur inscription: " + (json.error || resp.status));
        return;
      }

      // Si TU veux garder ton UI “Pré-inscription envoyée ✅”, laisse ça :
      if (window.toast) window.toast("Inscription envoyée ✅");
      else alert("Inscription envoyée ✅");

      form.reset();
      hidden.value = getSelectedDate();

    } catch (err) {
      alert("Erreur réseau: " + err.message);
    } finally {
      if (btn) { btn.disabled = false; btn.textContent = btn.dataset._txt || "Envoyer"; }
    }
  });

})();
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');
const menuClose = document.getElementById('menuClose');

if(menuBtn && mobileMenu && menuClose){
  menuBtn.addEventListener('click', ()=> mobileMenu.classList.remove('hidden'));
  menuClose.addEventListener('click', ()=> mobileMenu.classList.add('hidden'));
  mobileMenu.addEventListener('click', (e)=>{ if(e.target === mobileMenu) mobileMenu.classList.add('hidden'); });
}

</script>
</body>
</html>
